<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!---- CSP widened for Esri sub-domains -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com 'unsafe-inline';
    style-src  'self' https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com https://fonts.googleapis.com 'unsafe-inline';
    font-src   'self' https://cdnjs.cloudflare.com https://fonts.gstatic.com;
    img-src    'self' data: https://*.basemaps.cartocdn.com https://*.arcgisonline.com;
    connect-src 'self' https://osinfohub.vssmaximus.workers.dev https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://unpkg.com https://server.arcgisonline.com;
    base-uri   'self';
  ">

  <link rel="icon" href="data:,">
  <title>Dell OS | INFOHUB</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/MarkerCluster.Default.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.5.3/leaflet.markercluster.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>

  <!-- (styles unchanged) -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap');
    :root { --dell-blue:#0076CE; --bg-dark:#0f1115; }
    body{background-color:var(--bg-dark);font-family:'Inter',sans-serif;padding:24px;color:#333}
    /*  … all original CSS exactly as before … */
  </style>
</head>

<body>
  <a href="#main-content" class="skip-link">Skip to Main Content</a>

  <!--  … all markup exactly as before … -->

  <script>
/* ===========================
      CONFIG
   =========================== */
const WORKER_URL = "https://osinfohub.vssmaximus.workers.dev";
const AUTO_REFRESH_MS = 60_000;

/* … unchanged constants and helpers … */

/* ===========================
      INIT
   =========================== */
document.addEventListener("DOMContentLoaded", async () => {

  /* ---------- MAP SET-UP (fixed) ---------- */
  function initMap() {
    /* world bounds stop any wrap-around duplication */
    const worldBounds = [[-90, -180], [90, 180]];

    map = L.map("map", {
      scrollWheelZoom: false,         // prevents scroll-jacking
      zoomControl: false,
      attributionControl: true,
      minZoom: 1.5,
      maxBounds: worldBounds,
      maxBoundsViscosity: 1.0,
      worldCopyJump: false            // no duplicate worlds
    }).setView([25, 10], 2);

    L.control.zoom({ position: "topleft" }).addTo(map);

    /* Esri Light-Gray base, no tile wrap */
    L.tileLayer(
      "https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",
      {
        maxZoom: 19,
        noWrap: true,                 // no horizontal repetition
        bounds: worldBounds,
        attribution: 'Tiles &copy; Esri &mdash; Esri, USGS, NOAA'
      }
    ).addTo(map);

    /* … all remaining layer / cluster logic exactly as before … */
  }

  /* call the map initialiser */
  initMap();

  /* … everything else in DOMContentLoaded exactly as before … */
});

/* ===========================
      REMAINDER OF SCRIPT
   =========================== */
/* (all subsequent JS remains untouched) */
  </script>
</body>
</html>
